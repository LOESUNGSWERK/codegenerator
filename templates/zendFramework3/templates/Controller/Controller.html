<?php
/**
 * @link      http://github.com/zendframework/ZendSkeleton{{modulName|ucf}} for the canonical source repository
 * @copyright Copyright (c) 2005-2016 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd New BSD License
 */

namespace {{modulName|ucf}}\Controller;

use {{modulName|ucf}}\Form\{{tableName|ucf}}\{{tableName|ucf}}Form;
use {{modulName|ucf}}\Model\{{tableName|ucf}}\Repository\{{tableName|ucf}}Repository;

use Zend\Http\Request;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Mvc\Plugin\FlashMessenger\FlashMessenger;

/**
 * Class IndexController
 * @package {{modulName|ucf}}\Controller
 * @method Request getRequest()
 * @method  FlashMessenger flashMessenger()
 */
class {{tableName|ucf}}Controller extends AbstractActionController
{

    /**
     * @var {{tableName|ucf}}Repository
     */
    protected ${{tableName|lcf}}Repository;

    /**
     * @var {{tableName|ucf}}Form
     */
    private ${{tableName|lcf}}Form;

    /**
     * {{tableName|ucf}}Controller constructor.
     * @param {{tableName|ucf}}Repository ${{tableName|lcf}}Table
     * @param {{tableName|ucf}}Form $form
     */
    public function __construct({{tableName|ucf}}Repository ${{tableName|lcf}}Table, {{tableName|ucf}}Form ${{tableName|lcf}}Form)
    {
        $this->{{tableName|lcf}}Table = ${{tableName|lcf}}Table;
        $this->{{tableName|lcf}}Form = ${{tableName|lcf}}Form;
    }

    public function indexAction()
    {
        $this->checkLogin();

        return new ViewModel();
    }

    private function checkLogin()
    {
        if (!$this->identity()) {
            return $this->redirect()->toRoute('user-frontend');
        }
    }
}
